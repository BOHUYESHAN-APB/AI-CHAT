# 狼人杀规则（用于 AI 评测版本）

目标
- 狼人胜利条件：狼人人数 >= 非狼人（村民方）人数
- 村民胜利条件：所有狼人被淘汰

角色与初始分配（默认 6 人）
- 2x 狼人 (Werewolf)
- 1x 预言家 (Seer)
- 1x 女巫 (Witch) — 拥有一次救人和一次毒药（可分别使用）
- 2x 平民 (Villager)

游戏流程（回合）
1. 夜间（Night）
   - 狼人集体选择一个目标（服务器按狼人提议多数/随机决策）
   - 预言家选择一名玩家查看其角色（服务器记录，但不公开）
   - 女巫可选择救被狼人杀死的目标（如果已有）或毒另一名玩家（如果女巫资源可用）
   - 夜间动作按顺序解析：狼人决定 -> 预言家查看 -> 女巫决定（保存/毒）
   - 夜间记录包含：狼人提议列表、预言家查看结果（仅记录给日志）、女巫动作结果、实际死亡者

2. 白天（Day）
   - 公布夜间死亡者
   - 存活玩家进行投票（所有玩家均由 AI 投票）
   - 得票最多者被处决（若票数并列，随机从最高票者中选出）
   - 更新存活列表并记录白天动作（投票结果、处决者）

3. 判定胜负
   - 每个昼夜循环后进行胜负判定，满足任一胜利条件游戏结束

特殊规则
- 女巫救人：女巫仅能救当晚被狼人杀死的人，且救人消耗救人资格
- 女巫毒人：女巫毒人会替换当晚死亡目标（若毒人与被杀者不同，则毒人死亡）
- 若女巫选择 'none' 则不行动
- 预言家查看不会改变玩家状态，仅记录查看结果供 AI 推理历史使用（不公开给其它角色）

评测说明
- 可在 `games/werewolf/backend/ai_models.json` 中配置每个 AI 使用的模型，从而进行多模型对抗评测
- 建议在运行多组对局时记录每回合每位 AI 使用的模型、响应时间与返回结果以便后续统计分析