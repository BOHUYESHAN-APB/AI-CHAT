# 🐺 AI狼人杀游戏 - CustomTkinter版本

基于CustomTkinter的现代化AI狼人杀游戏测试平台，提供了比PyQt6版本更现代化、更美观的用户界面。

## 📁 项目位置

此版本位于 `ctk-project/` 目录下，是项目的两个独立软件版本之一。

## 🎯 当前状态

- 🔄 **开发中** - 基础架构已搭建
- 🔄 **现代化界面** - 基于CustomTkinter的界面
- 🔄 **功能待实现** - 游戏逻辑和AI集成待开发

## ✨ 新特性

### 🎨 现代化UI
- **CustomTkinter框架**: 基于现代tkinter的UI库
- **主题切换**: 支持亮色/暗色主题切换
- **颜色主题**: 多种颜色主题可选（蓝色、绿色、红色、紫色、橙色）
- **响应式设计**: 自适应窗口大小调整

### 🎮 增强的游戏体验
- **实时聊天界面**: 类似现代聊天应用的对话界面
- **玩家状态面板**: 实时显示玩家状态、角色和AI模型
- **游戏控制面板**: 直观的游戏控制按钮
- **状态统计**: 实时显示游戏回合、存活玩家、游戏时长

### 💾 新功能
- **游戏保存/加载**: 支持游戏进度保存和加载
- **聊天历史**: 保存所有AI对话记录
- **系统监控**: 实时显示内存使用情况和AI状态
- **快捷键支持**: 支持键盘快捷键操作

### 🔧 技术改进
- **模块化设计**: 更好的代码组织和维护性
- **异步处理**: 改进的UI响应性能
- **错误处理**: 更完善的异常处理和用户反馈
- **日志系统**: 详细的运行日志记录

## 🚀 快速开始

### 1. 进入项目目录
```bash
cd ctk-project
```

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 运行CustomTkinter版本
```bash
python src/main.py
```

**注意**: 当前版本为基础架构，完整功能正在开发中。

### 3. 配置AI模型（可选）
编辑 `config/config.yaml` 文件，添加您的AI API密钥：
```yaml
ai_providers:
  - name: "OpenAI-1"
    provider: "openai"
    model: "gpt-3.5-turbo"
    api_key: "your-api-key-here"
    base_url: "https://api.openai.com/v1"
```

## 🖥️ 界面介绍

### 主界面布局
```
┌─────────────────────────────────────────────────────────────┐
│ 🐺 AI狼人杀游戏 - 标题栏 (主题切换 + 颜色主题)           │
├─────────────────────────────────────────────────────────────┤
│ 🎮 开始新游戏 | ⏸️ 暂停游戏 | ⚙️ 游戏设置           │
│ 📊 游戏状态: 未开始 | 🌙 第 0 回合 | 👥 存活: 7 人    │
├──────────────────────┬──────────────────────────────────────┤
│ 👥 玩家列表          │ 📝 游戏聊天                          │
│ ├─ AI-预言家 (预言家)│ ├─ 系统: 游戏开始！                  │
│ ├─ AI-女巫 (女巫)   │ ├─ AI-预言家: 今晚要查验谁呢？      │
│ ├─ AI-猎人 (猎人)   │ ├─ AI-狼人1: 我们今晚要刀谁？        │
│ ├─ AI-狼人1 (狼人)  │ └─ 输入框 + 发送按钮                 │
│ ├─ AI-狼人2 (狼人)  │                                      │
│ ├─ AI-村民1 (村民)  │                                      │
│ └─ AI-村民2 (村民)  │                                      │
├──────────────────────┴──────────────────────────────────────┤
│ ✅ 就绪 - 等待开始游戏 | CustomTkinter版 | 内存: 64MB     │
├─────────────────────────────────────────────────────────────┤
│ 📁 新建游戏 | 💾 保存游戏 | 📂 加载游戏 | ⚙️ 设置...    │
└─────────────────────────────────────────────────────────────┘
```

### 功能区域说明

1. **标题栏**: 显示游戏标题，包含主题切换和颜色主题选择
2. **游戏控制区**: 主要游戏操作按钮和状态显示
3. **玩家列表**: 显示所有AI玩家及其角色、状态、使用的AI模型
4. **游戏聊天**: 显示AI之间的对话和游戏进程
5. **状态栏**: 显示系统状态、内存使用、AI配置状态
6. **菜单栏**: 提供文件操作、设置、帮助等功能

## 🎯 使用指南

### 开始游戏
1. 点击"🎮 开始新游戏"按钮
2. 观察AI玩家的对话和行为
3. 在聊天框中输入消息与AI互动（可选）
4. 使用暂停按钮控制游戏进程

### 主题切换
- **外观主题**: 在标题栏选择"light"、"dark"或"system"
- **颜色主题**: 选择不同的颜色方案（蓝色、绿色、红色等）

### 游戏管理
- **保存游戏**: 点击"💾 保存游戏"保存当前进度
- **加载游戏**: 点击"📂 加载游戏"恢复之前的游戏
- **游戏设置**: 点击"⚙️ 设置"配置游戏参数

### 监控功能
- **实时状态**: 查看游戏回合、存活玩家数、游戏时长
- **系统信息**: 监控内存使用情况和AI模型状态
- **聊天历史**: 查看所有AI对话记录

## 🔧 配置选项

### AI提供商配置
支持以下AI提供商：
- OpenAI (GPT-3.5-turbo, GPT-4)
- Anthropic (Claude-3)
- Google (Gemini)
- DeepSeek
- Moonshot
- Zhipu (智谱)
- Baichuan (百川)
- Groq
- OpenRouter

### 游戏规则配置
- 玩家人数设置
- 角色分配比例
- 游戏回合时间
- AI思考时间

## 📊 性能优化

### 内存管理
- 自动清理过期聊天记录
- 优化图片和资源加载
- 智能缓存机制

### 响应优化
- 异步UI更新
- 延迟加载非关键组件
- 智能重绘机制

## 🐛 故障排除

### 常见问题

1. **CustomTkinter导入失败**
   ```bash
   pip install customtkinter --upgrade
   ```

2. **界面显示异常**
   - 尝试切换主题
   - 检查显示器缩放设置
   - 更新显卡驱动

3. **游戏无法开始**
   - 检查AI配置是否正确
   - 查看日志文件 `logs/game_customtkinter.log`
   - 确保配置文件格式正确

### 日志文件
- **应用日志**: `logs/game_customtkinter.log`
- **错误日志**: `logs/error.log`
- **调试日志**: `logs/debug.log`

## 🔄 与PyQt6版本对比

| 特性 | PyQt6版本 | CustomTkinter版本 |
|------|-----------|-------------------|
| UI框架 | PyQt6 | CustomTkinter |
| 安装大小 | 较大 | 较小 |
| 启动速度 | 中等 | 快速 |
| 内存占用 | 中等 | 较低 |
| 主题支持 | 手动CSS | 内置主题 |
| 响应速度 | 良好 | 优秀 |
| 跨平台 | 支持 | 支持 |
| 学习曲线 | 较陡 | 平缓 |
| 社区支持 | 成熟 | 活跃 |

## 🚀 未来计划

### 短期目标
- [ ] 完善AI对话系统
- [ ] 添加更多游戏角色
- [ ] 优化界面性能
- [ ] 添加音效支持

### 长期目标
- [ ] 多语言支持
- [ ] 网络对战功能
- [ ] AI学习系统
- [ ] 移动端适配

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

### 开发环境设置
```bash
git clone <repository-url>
cd werewolf-game
pip install -r requirements.txt
python src/launch_customtkinter.py
```

### 代码规范
- 遵循PEP 8编码规范
- 添加适当的注释和文档
- 编写单元测试
- 更新相关文档

## 📄 许可证

MIT License - 详见项目根目录的LICENSE.md文件

## 🙏 致谢

- [CustomTkinter](https://github.com/TomSchimansky/CustomTkinter) - 现代化的tkinter UI库
- 所有AI提供商 - 提供强大的AI模型支持
- 开源社区 - 持续的支持和贡献

---

**享受AI狼人杀游戏吧！🐺🎮**